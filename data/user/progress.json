{
  "metadata": {
    "description": "Structure de données pour la progression utilisateur dans Paris Explorer",
    "version": "2.0.0",
    "lastUpdated": "2025-01-05"
  },
  "template": {
    "userId": "nom-utilisateur",
    "createdAt": "2025-01-05T10:30:00.000Z",
    "lastUpdated": "2025-01-05T15:45:00.000Z",
    "stats": {
      "totalVisited": 42,
      "totalPlaces": 2127,
      "completionRate": 1.97,
      "currentStreak": 5,
      "longestStreak": 12,
      "firstVisit": "2024-12-15T09:00:00.000Z",
      "lastVisit": "2025-01-05T14:30:00.000Z",
      "totalTimeSpent": 18000,
      "averageRating": 4.2,
      "discoveredSecrets": 3,
      "visitsByMonth": {
        "2024-12": 15,
        "2025-01": 27
      },
      "visitsByDay": {
        "monday": 8,
        "tuesday": 6,
        "wednesday": 7,
        "thursday": 5,
        "friday": 9,
        "saturday": 4,
        "sunday": 3
      }
    },
    "achievements": {
      "unlocked": [
        {
          "id": "discoverer",
          "unlockedAt": "2024-12-15T09:15:00.000Z",
          "progress": 1,
          "requirement": 1
        },
        {
          "id": "explorer", 
          "unlockedAt": "2024-12-20T16:30:00.000Z",
          "progress": 10,
          "requirement": 10
        },
        {
          "id": "gourmet",
          "unlockedAt": "2024-12-28T19:45:00.000Z",
          "progress": 20,
          "requirement": 20
        }
      ],
      "inProgress": [
        {
          "id": "adventurer",
          "progress": 42,
          "requirement": 50,
          "progressPercent": 84
        },
        {
          "id": "parisien",
          "progress": 16,
          "requirement": 20,
          "progressPercent": 80,
          "details": {
            "visitedArrondissements": [
              "1er", "2ème", "3ème", "4ème", "5ème", "6ème", "7ème", "8ème",
              "9ème", "10ème", "11ème", "12ème", "15ème", "16ème", "17ème", "18ème"
            ],
            "missingArrondissements": ["13ème", "14ème", "19ème", "20ème"]
          }
        }
      ]
    },
    "visitHistory": [
      {
        "placeId": "1er-monuments-musee-du-louvre",
        "visitedAt": "2024-12-15T09:15:00.000Z",
        "rating": 5,
        "timeSpent": 180,
        "weather": "ensoleillé",
        "companions": ["famille"]
      },
      {
        "placeId": "7ème-monuments-tour-eiffel",
        "visitedAt": "2024-12-15T14:30:00.000Z",
        "rating": 5,
        "timeSpent": 120,
        "weather": "nuageux",
        "companions": ["famille"]
      },
      {
        "placeId": "18ème-monuments-sacre-coeur",
        "visitedAt": "2024-12-16T16:00:00.000Z",
        "rating": 4,
        "timeSpent": 90,
        "weather": "pluvieux",
        "companions": ["solo"]
      }
    ],
    "streakHistory": [
      {
        "startDate": "2024-12-15",
        "endDate": "2024-12-19",
        "length": 5,
        "placesVisited": 8
      },
      {
        "startDate": "2024-12-22",
        "endDate": "2025-01-02",
        "length": 12,
        "placesVisited": 15
      },
      {
        "startDate": "2025-01-01",
        "endDate": "2025-01-05",
        "length": 5,
        "placesVisited": 7,
        "current": true
      }
    ],
    "milestones": [
      {
        "type": "places_visited",
        "value": 1,
        "achievedAt": "2024-12-15T09:15:00.000Z",
        "title": "Premier pas"
      },
      {
        "type": "places_visited", 
        "value": 10,
        "achievedAt": "2024-12-20T16:30:00.000Z",
        "title": "Exploration lancée"
      },
      {
        "type": "arrondissements_visited",
        "value": 5,
        "achievedAt": "2024-12-25T11:00:00.000Z", 
        "title": "Explorateur multi-quartiers"
      },
      {
        "type": "categories_explored",
        "value": 10,
        "achievedAt": "2024-12-30T15:30:00.000Z",
        "title": "Découvreur éclectique"
      }
    ],
    "preferences": {
      "favoriteArrondissement": "4ème",
      "favoriteCategory": "monuments",
      "preferredTime": "afternoon",
      "preferredWeather": "ensoleillé",
      "avgVisitDuration": 105,
      "explorationStyle": "cultural",
      "companionPreference": "famille",
      "lastSyncAt": "2025-01-05T15:45:00.000Z"
    },
    "goals": {
      "monthly": {
        "target": 20,
        "current": 12,
        "deadline": "2025-01-31"
      },
      "yearly": {
        "target": 200,
        "current": 42,
        "deadline": "2025-12-31"
      },
      "custom": [
        {
          "id": "complete-marais",
          "title": "Conquérir le Marais",
          "description": "Visiter tous les lieux du 3ème et 4ème arrondissement",
          "target": 45,
          "current": 28,
          "deadline": "2025-06-30",
          "reward": "Badge Marais Master"
        }
      ]
    }
  },
  "examples": {
    "nouveauUtilisateur": {
      "userId": "marie-exploratrice",
      "createdAt": "2025-01-05T10:00:00.000Z",
      "lastUpdated": "2025-01-05T10:00:00.000Z",
      "stats": {
        "totalVisited": 0,
        "totalPlaces": 2127,
        "completionRate": 0,
        "currentStreak": 0,
        "longestStreak": 0,
        "firstVisit": null,
        "lastVisit": null,
        "totalTimeSpent": 0,
        "averageRating": 0,
        "discoveredSecrets": 0,
        "visitsByMonth": {},
        "visitsByDay": {}
      },
      "achievements": {
        "unlocked": [],
        "inProgress": []
      },
      "visitHistory": [],
      "streakHistory": [],
      "milestones": []
    },
    "utilisateurActif": {
      "userId": "pierre-parisien",
      "stats": {
        "totalVisited": 156,
        "totalPlaces": 2127,
        "completionRate": 7.33,
        "currentStreak": 23,
        "longestStreak": 31,
        "discoveredSecrets": 12
      },
      "achievements": {
        "unlocked": [
          "discoverer", "explorer", "adventurer", "gourmet", "culture_lover", 
          "historian", "night_owl", "secret_hunter"
        ]
      }
    }
  },
  "validation": {
    "required": ["userId", "createdAt", "stats"],
    "stats": {
      "required": ["totalVisited", "totalPlaces", "completionRate"],
      "types": {
        "totalVisited": "number",
        "totalPlaces": "number", 
        "completionRate": "number",
        "currentStreak": "number",
        "longestStreak": "number"
      }
    }
  }
}
